\begin{figure}[H]
\centering
\begin{tikzpicture}[
  asn/.style={black!70, minimum size=1cm},
  timeslot/.style={draw, rectangle, minimum size=1cm},
  arr/.style={help lines,black!70,<->},
  desc/.style={black!70},
]

\foreach \i in {0,...,7} {
  \node (asn\i) [asn] at (\i, 4) {\tiny $ASN_{\i}$};
}
\foreach [evaluate={\ts=int(mod(\i, 4))}] \i in {0,...,7} {
  \node (ts3\i) [timeslot] at (\i, 3) {};
}
\foreach [evaluate={\ts=int(mod(\i, 4))}] \i in {0,...,7} {
  \node (ts2\i) [timeslot] at (\i, 2) {};
}
\foreach [evaluate={\ts=int(mod(\i, 4))}] \i in {0,...,7} {
  \node (ts1\i) [timeslot] at (\i, 1) {};
}
\foreach [evaluate={\ts=int(mod(\i, 4))}] \i in {0,...,7} {
  \node (ts\i) [asn] at (\i, 0) {$TS_{\ts}$};
}
% \node (ts8) [minimum height=1cm, minimum width=2cm, black!70] at (8.5, 0) {\ldots};
% \draw[help lines, black!70]
%   (ts8.north west) -- (ts8.north east) node[fill=white, black!70] {$\ldots$};
% \draw[help lines, black!70]
%   (ts8.south west) -- (ts8.south east) node[fill=white, black!70] {$\ldots$};

\node (choff3) [black!70] at (-1.5, 3) {$Ch_{off} 2$};
\node (choff2) [black!70] at (-1.5, 2) {$Ch_{off} 1$};
\node (choff1) [black!70] at (-1.5, 1) {$Ch_{off} 0$};

\begin{scope}[on background layer]
\fill[blue!50] (ts10.south west) rectangle (ts10.north east);
\fill[blue!50] (ts24.south west) rectangle (ts24.north east);

\fill[orange!50] (ts30.south west) rectangle (ts30.north east);
\fill[orange!50] (ts14.south west) rectangle (ts14.north east);

\fill[green!50] (ts22.south west) rectangle (ts22.north east);
\fill[green!50] (ts36.south west) rectangle (ts36.north east);
\end{scope}

\draw[ultra thick] 
  (ts10.south west) rectangle (ts33.north east)
  (ts14.south west) rectangle (ts37.north east);

\draw[arr]
  ([yshift=-10pt]ts0.south west) -- node[fill=white] {$SF0$} ([yshift=-10pt]{ts3.south east});
\draw[arr]
  ([yshift=-10pt]ts4.south west) -- node[fill=white] {$SF1$} ([yshift=-10pt]{ts7.south east});
\draw[arr]
  ([yshift=-10pt]ts8.south west) -- node[fill=white] {$SF\ldots$} ([yshift=-10pt]{ts8.south east});
\node[desc] at
  ([xshift=2cm, yshift=-28pt]ts0.south west) {$k = 0$};
\node[desc] at
  ([xshift=2cm, yshift=-28pt]ts4.south west) {$k = 1$};
\end{tikzpicture}
\caption{Two slotframe with scheduled cells changing channel between slotframes\label{fig:channelhopping}}
\end{figure}
