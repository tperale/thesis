\chapter{Introduction}

With each year new companies jumping into the \emph{IoT} sector and all the
major \emph{IT actors} investing and developing
products\footnote{\url{https://www.fortunebusinessinsights.com/industry-reports/internet-of-things-iot-market-100307}},
as well as telecoms building new
infrastructure\footnote{\url{https://www.proximus.be/en/id_cl_iot/companies-and-public-sector/it-services/iot/internet-of-things.html}}
The \emph{Internet of Things} has undoubtedly been a subject of hype during the
last decade while still maintaining a consistent growth until now.
Business analysts agree that we should expect to reach at least 40 billion
installed \emph{IoT} devices by
2027\footnote{\url{https://www.businessinsider.com/internet-of-things-report}}. The
\emph{Internet of Things} is used to describe inter-connected devices gathering
data without the need of human interaction.
We are, as consumer, already familiar with the traditional \emph{IoT} products
we use in our households that allow to connect our light bulbs, our fridge and
washing machine, \ldots
Meanwhile we have less knowledge of the industrial usage of \emph{IoT}, also
known as \emph{IIoT}. \emph{IIoT} is one of the fastest growing domain of the
market. More and more industries are adopting \emph{IoT}  to consolidate their
productions with \emph{real-time monitoring}, predictive maintenance on their
assets and products, connecting their supply chains, all of this enabled with
the help of network of sensors, and this is applicable in a wide spectrum of
sectors like \emph{smart farming}, \emph{smart cars}, \emph{smart cities},
\emph{energy managements}, \ldots

\paragraph{}

The common aspect of all of these applications are that they can communicate
wirelessly.
A multitude of telecommunication technologies are used or were created to suit
this solution and can be categorized by three different characteristic.

\begin{itemize}
    \item Long or Short \emph{range}
    \item High or low \emph{data-rate}
    \item Low or high \emph{power usage} 
\end{itemize}

From these characteristics you can only chose two according to the physical
law\improvement{Explanation needed with the exact law reference explaining this}
The following graphics (Fig \ref{fig:commrangegraph}) show a classification of
existing wireless communication protocol used in the \emph{IoT} and mix it in three 
main categories.

\begin{itemize}
    \item \emph{Short-Range wireless communication} Short range, high data-rate
    \item \emph{Cellular communication} Long range, high data-rate
    \item \emph{LPWAN communication} Long range, low power and low data-rate
\end{itemize}

\input{thesis.tex/chapters/1/fig/comparaison.tex}

This work focus only on \emph{LoRa}, a proprietary chirp spread spectrum
modulation technique owned by \emph{Semtech} operating in the sub-GHz
unlicensed \emph{ISM} band, that will be explained in more details in section
\ref{section:lora},
The main characteristics of \emph{LoRa} is that it trade throughput for range
and low power transmission that as already achieved a record distance of 700km
with direct line of sight between the receiver and the
transmitter\footnote{https://www.thethingsnetwork.org/article/ground-breaking-world-record-lorawan-packet-received-at-702-km-436-miles-distance}.
However this case is not a real world example, we should expect a typical range
in urban areas of around \emph{2 to 5km} and \emph{15km} in suburban
areas\cite{8030482}. Fine tuning the \emph{PHY} settings of the protocol also
allow to trade communication distance over throughput and a longer band usage
which decrease the number of concurrent motes that can communicate over the
band\cite{10.1145/2988287.2989163}.

\emph{LoRa} is often used in conjunction with the \emph{LoRaWAN} a
point-to-multipoint protocols.
\emph{LoRaWAN} is a ALOHA based\cite{loraalliance:lorawanspecification} network
using a star-of-stars topology composed of wirelessly interconnected 
\emph{motes} sending data to \emph{gateways} which relay messages to central 
servers over a Cellular or Ethernet connection as we can see in 
Figure~\ref{fig:startopology}.
This single-hop topology is an easy to deploy solution because network coverage
for LoRaWAN is fairly
developped\footnote{\url{https://www.thethingsnetwork.org/map}}.

\input{thesis.tex/chapters/1/fig/topology.tex}

The issue we have is \emph{LoRaWAN} does not
scale as studied in~\cite{8030482}~\cite{10.1145/2988287.2989163}, especially 
in an urban environment with a dense network where a lot of collision can occur
during transmission.\change{Kind of the same thing I say later}
\emph{LoRaWAN} is \emph{ALOHA} based and \emph{CSMA}
is not possible because \emph{Channel Activity Detection} (CAD) only detect the
preamble of a communication. This mean a lot of collision can occur during a
transmission attempt with a gateway. The \emph{LoRaWAN} protocol state that on
collision occur the transmission has to be re-done which lead to a bigger
energy consumption as well as occupying the channel even more.
Link quality may also vary some motes far away from the gateway may have issue
with doing a correct transmission. Environmental factor like temperature,
humidity as studied in~\cite{evaluation_of_the_reliability_of_lora}, have a lot of influence
in the link quality, as well as the topology of the terrain that make the
reception not uniform as we can see in Fig~\ref{fig:coverage}.

Also gateways could be a single point of failure of the network and may not be 
available everywhere, some use cases may not allow the
the installation of gateways which require more demanding infrastructure than a
battery operated mote.
That's the case for pipelines and tunnel as in~\cite{Abrardo_2019},
where we would prefer to only install motes running on batteries because a
gateway would'nt have much effect with the linear nature of the installation.

One of the main limiting factor of \emph{LoRaWAN} (\cite{8030482}) is the
\emph{duty-cycle} regulations with the \emph{ISM} bands in place with every
transmitting devices (motes and gateways). The european ISM band
has set a duty-cycle of \emph{1\%} meaning the each node and gateway has a
maximum transmission time per hour of \emph{36 sec/hour}.\improvement{Add some reference to ISM
regulations} and, as studied in~\cite{8030482}, as the network get more dense
with end-devices trying to transmit to a base-station, the less packet get
received due to the effect of collision.

\input{thesis.tex/chapters/1/fig/coverage.tex}

% \begin{tikzpicture}
%     \node[draw] (Application) [abstract, rectangle]{\textbf{Application Layer}};
%     \node[draw] (MAC) [abstract, rectangle, below=0.2cm of Application, text justified]{\textbf{Media Access Control (MAC) Layer}};
%     \node[draw] (Phy) [abstract, rectangle, below=0.2cm of MAC, text justified]{\textbf{Physical (PHY) Layer}};
%     \node[draw] (Rf) [abstract, rectangle, below=0.2cm of Phy, text justified]{\textbf{Radio Frequency (RF) Layer}};
% \end{tikzpicture}

\paragraph{}


Using a multi-hop routing protocol (Fig~\ref{fig:meshtopology}) solution
instead of LoRaWAN could acutally mitigate some of the protocol congestion
issues (\cite{8115756}).
Increasing the redundancy and the reliability of the lossy network could be a
solution to the problems previously exposed like varying topology,
environmental changing conditions or end-of-reach devices.
A multi-hop network can adapt to this kind of variation, routing protocols can
actually change the path of a packet when node are not responding and keep
tracks of the routes available.\improvement{Maybe cite study with the node in water roover}
Also multi-hop is a strong candidate for large areas monitoring application
where few gateways are available.

Work to create such a multi-hop routing protocol has already been done in
~\cite{8115756} but didn't took into account the energy consumption of the
motes. Hopefully Medium Access Control (MAC) protocols such as \emph{TSCH} have
already been developped for the \emph{IEEE 802.15.4} standard to solve the
problem energy consumption problem.
Work in~\cite{8847137} and~\cite{njomgang_2018} has already been done in
\emph{VUB} toward an energy efficient solution.
This thesis is part of the outcome of the combined efforts of the previous
years by adapting \emph{TSCH} for the \emph{Zoleration RE-Mote} working with a
\emph{RN2483} LoRa shield.



